'use strict';

const tap = require('tap');

const readInt8 = require('../');

tap.test('positive 32-bit', t => {
	t.is(readInt8(Buffer.from([0, 0, 0, 0, 0, 0, 0, 0])), '0');
	t.is(readInt8(Buffer.from([0, 0, 0, 0, 0, 0, 0, 1])), '1');
	t.is(readInt8(Buffer.from([0, 0, 0, 0, 0, 0, 2, 0])), '512');
	t.is(readInt8(Buffer.from([0, 0, 0, 0, 0xff, 0xff, 0xff, 0xff])), '4294967295');
	t.end();
});

tap.test('negative 32-bit', t => {
	t.is(readInt8(Buffer.from([0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff])), '-1');
	t.is(readInt8(Buffer.from([0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xfe, 0x00])), '-512');
	t.is(readInt8(Buffer.from([0xff, 0xff, 0xff, 0xff, 0x00, 0x00, 0x00, 0x00])), '-4294967296');
	t.end();
});

tap.test('positive 64-bit', t => {
	t.is(readInt8(Buffer.from([0x00, 0x1f, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff])), '9007199254740991');
	t.is(readInt8(Buffer.from([0x7f, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff])), '9223372036854775807');
	t.is(readInt8(Buffer.from([0x00, 0x00, 0x00, 0x02, 0x54, 0x0b, 0xe4, 0x00])), '10000000000');
	t.is(readInt8(Buffer.from([0x00, 0x00, 0x00, 0x17, 0x48, 0x76, 0xe8, 0x01])), '100000000001');
	t.is(readInt8(Buffer.from([0x0d, 0xe0, 0xb6, 0xb3, 0xa7, 0x64, 0x00, 0x63])), '1000000000000000099');
	t.end();
});

tap.test('negative 64-bit', t => {
	t.is(readInt8(Buffer.from([0xff, 0xe0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01])), '-9007199254740991');
	t.is(readInt8(Buffer.from([0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00])), '-9223372036854775808');
	t.is(readInt8(Buffer.from([0xff, 0xff, 0xff, 0xe8, 0xb7, 0x89, 0x18, 0x00])), '-100000000000');
	t.is(readInt8(Buffer.from([0xff, 0xff, 0xff, 0xfd, 0xab, 0xf4, 0x1b, 0xff])), '-10000000001');
	t.is(readInt8(Buffer.from([0xf2, 0x1f, 0x49, 0x4c, 0x58, 0x9b, 0xff, 0x9d])), '-1000000000000000099');
	t.end();
});
